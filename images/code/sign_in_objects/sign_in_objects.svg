<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="831px" preserveAspectRatio="none" style="width:921px;height:831px;background:#FFFFFF;" version="1.1" viewBox="0 0 921 831" width="921px" zoomAndPan="magnify"><defs><filter height="300%" id="fs716de66m1vc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="130" x="389" y="17.4023">Sign In Objects</text><!--MD5=[9866a4850b67e61c0bb8154df9df1072]
cluster authentication--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="67,269.1992,177,269.1992,184,291.6875,759,291.6875,759,701.1992,67,701.1992,67,269.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="67" x2="184" y1="291.6875" y2="291.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="104" x="71" y="284.7344">authentication</text><!--MD5=[a60570e4b426f702ccbb0d459e3b9417]
cluster models--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="91,344.6992,150,344.6992,157,367.1875,241,367.1875,241,456.6992,91,456.6992,91,344.6992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="91" x2="157" y1="367.1875" y2="367.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="53" x="95" y="360.2344">models</text><!--MD5=[25478cb9e40343700688f63e3ec33e09]
cluster serializers--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="283,312.1992,364,312.1992,371,334.6875,577,334.6875,577,489.1992,283,489.1992,283,312.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="283" x2="371" y1="334.6875" y2="334.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="75" x="287" y="327.7344">serializers</text><!--MD5=[e2a75efa8a0f57c2afae8bf75386f79c]
cluster views--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="91,513.1992,138,513.1992,145,535.6875,735,535.6875,735,677.1992,91,677.1992,91,513.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="91" x2="145" y1="535.6875" y2="535.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="41" x="95" y="528.7344">views</text><!--MD5=[d7039e7cfab8b89ebbab916f62317abd]
cluster django.contrib.auth.models--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="16,96.1992,216,96.1992,223,118.6875,226,118.6875,226,195.1992,16,195.1992,16,96.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="223" y1="118.6875" y2="118.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194" x="20" y="111.7344">django.contrib.auth.models</text><!--MD5=[9ff4575cd4d3b84ea0de9e88fb7d1163]
cluster rest_framework_simplejwt.serializers--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="250,96.1992,526,96.1992,533,118.6875,536,118.6875,536,195.1992,250,195.1992,250,96.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="250" x2="533" y1="118.6875" y2="118.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="270" x="254" y="111.7344">rest_framework_simplejwt.serializers</text><!--MD5=[7db0daef03430a1a1d133237b77a54fc]
cluster rest_framework_simplejwt.views--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="108,725.1992,350,725.1992,357,747.6875,360,747.6875,360,824.1992,108,824.1992,108,725.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="108" x2="357" y1="747.6875" y2="747.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="236" x="112" y="740.7344">rest_framework_simplejwt.views</text><!--MD5=[ab568dd7d5a90b4f4afab646aa2bdb23]
cluster user_devices--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="560,27.1992,657,27.1992,664,49.6875,904,49.6875,904,245.1992,560,245.1992,560,27.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="560" x2="664" y1="49.6875" y2="49.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="564" y="42.7344">user_devices</text><!--MD5=[eb1e3a5c82661455fc871ea1be65076c]
cluster device_models--><polygon fill="#FFFFFF" filter="url(#fs716de66m1vc)" points="584,70.1992,643,70.1992,650,92.6875,880,92.6875,880,221.1992,584,221.1992,584,70.1992" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="584" x2="650" y1="92.6875" y2="92.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="53" x="588" y="85.7344">models</text><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect codeLine="8" fill="#FEFECE" filter="url(#fs716de66m1vc)" height="60.9551" id="User" style="stroke:#A80036;stroke-width:1.5;" width="118" x="107" y="379.6992"/><ellipse cx="149" cy="395.6992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M151.4731,401.8423 Q150.8921,402.1411 150.2529,402.2905 Q149.6138,402.4399 148.9082,402.4399 Q146.4014,402.4399 145.0815,400.7881 Q143.7617,399.1362 143.7617,396.0151 Q143.7617,392.8857 145.0815,391.2339 Q146.4014,389.582 148.9082,389.582 Q149.6138,389.582 150.2612,389.7314 Q150.9087,389.8809 151.4731,390.1797 L151.4731,392.9023 Q150.8423,392.3213 150.2488,392.0515 Q149.6553,391.7817 149.0244,391.7817 Q147.6797,391.7817 146.9949,392.8484 Q146.3101,393.915 146.3101,396.0151 Q146.3101,398.1069 146.9949,399.1736 Q147.6797,400.2402 149.0244,400.2402 Q149.6553,400.2402 150.2488,399.9705 Q150.8423,399.7007 151.4731,399.1196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="26" x="169" y="400.2344">User</text><line style="stroke:#A80036;stroke-width:1.5;" x1="108" x2="224" y1="411.6992" y2="411.6992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="106" x="113" y="426.334">Custom User model</text><line style="stroke:#A80036;stroke-width:1.5;" x1="108" x2="224" y1="432.6543" y2="432.6543"/><!--MD5=[98efab59787b1faba6fc022c343c147b]
class AppDevicePairSerializer--><rect codeLine="14" fill="#FEFECE" filter="url(#fs716de66m1vc)" height="125.7305" id="AppDevicePairSerializer" style="stroke:#A80036;stroke-width:1.5;" width="261" x="299.5" y="347.1992"/><ellipse cx="357.25" cy="363.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M359.7231,369.3423 Q359.1421,369.6411 358.5029,369.7905 Q357.8638,369.9399 357.1582,369.9399 Q354.6514,369.9399 353.3315,368.2881 Q352.0117,366.6362 352.0117,363.5151 Q352.0117,360.3857 353.3315,358.7339 Q354.6514,357.082 357.1582,357.082 Q357.8638,357.082 358.5112,357.2314 Q359.1587,357.3809 359.7231,357.6797 L359.7231,360.4023 Q359.0923,359.8213 358.4988,359.5515 Q357.9053,359.2817 357.2744,359.2817 Q355.9297,359.2817 355.2449,360.3484 Q354.5601,361.415 354.5601,363.5151 Q354.5601,365.6069 355.2449,366.6736 Q355.9297,367.7402 357.2744,367.7402 Q357.9053,367.7402 358.4988,367.4705 Q359.0923,367.2007 359.7231,366.6196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="377.75" y="367.7344">AppDevicePairSerializer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="300.5" x2="559.5" y1="379.1992" y2="379.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="249" x="305.5" y="393.834">Custom serializer that validates the User using</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="122" x="305.5" y="406.7891">the provided OTP code</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="300.5" x2="559.5" y1="413.1094" y2="413.1094"/><ellipse cx="310.5" cy="424.1094" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="319.5" y="427.7441">username_field: str</text><ellipse cx="310.5" cy="437.0645" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="157" x="319.5" y="440.6992">__init__(self, *args, **kwargs)</text><ellipse cx="310.5" cy="450.0195" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="99" x="319.5" y="453.6543">validate(self, attrs)</text><ellipse cx="310.5" cy="462.9746" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="106" x="319.5" y="466.6094">get_token(cls, user)</text><!--MD5=[e70706344e60fa2c232f795c7f9231ef]
class AppDeviceTokenObtainPairView--><rect codeLine="27" fill="#FEFECE" filter="url(#fs716de66m1vc)" height="112.7754" id="AppDeviceTokenObtainPairView" style="stroke:#A80036;stroke-width:1.5;" width="253" x="107.5" y="548.1992"/><ellipse cx="138.7" cy="564.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M141.1731,570.3423 Q140.5921,570.6411 139.9529,570.7905 Q139.3138,570.9399 138.6082,570.9399 Q136.1014,570.9399 134.7815,569.2881 Q133.4617,567.6362 133.4617,564.5151 Q133.4617,561.3857 134.7815,559.7339 Q136.1014,558.082 138.6082,558.082 Q139.3138,558.082 139.9612,558.2314 Q140.6087,558.3809 141.1731,558.6797 L141.1731,561.4023 Q140.5423,560.8213 139.9488,560.5515 Q139.3553,560.2817 138.7244,560.2817 Q137.3797,560.2817 136.6949,561.3484 Q136.0101,562.415 136.0101,564.5151 Q136.0101,566.6069 136.6949,567.6736 Q137.3797,568.7402 138.7244,568.7402 Q139.3553,568.7402 139.9488,568.4705 Q140.5423,568.2007 141.1731,567.6196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="185" x="156.3" y="568.7344">AppDeviceTokenObtainPairView</text><line style="stroke:#A80036;stroke-width:1.5;" x1="108.5" x2="359.5" y1="580.1992" y2="580.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="211" x="113.5" y="594.834">Get JWT tokens for User with AppDevice</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="113.5" y="607.7891">and OTP code.</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="108.5" x2="359.5" y1="614.1094" y2="614.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="130.5" y="628.7441"/><ellipse cx="118.5" cy="638.0645" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="223" x="127.5" y="641.6992">serializer_class = AppDevicePairSerializer</text><ellipse cx="118.5" cy="651.0195" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="227" x="127.5" y="654.6543">@action authenticate(self, *args, **kwargs)</text><path d="M395.5,576.6992 L395.5,600.6992 L360.8,604.6992 L395.5,608.6992 L395.5,632.6309 A0,0 0 0 0 395.5,632.6309 L718.5,632.6309 A0,0 0 0 0 718.5,632.6309 L718.5,586.6992 L708.5,576.6992 L395.5,576.6992 A0,0 0 0 0 395.5,576.6992 " fill="#FBFB77" filter="url(#fs716de66m1vc)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M708.5,576.6992 L708.5,586.6992 L718.5,586.6992 L708.5,576.6992 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="401.5" y="594.2676">authenticate is an action</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="401.5" y="609.5781">to authenticate user with email / password pair</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="401.5" y="624.8887">before authentication with OTP</text><!--MD5=[aa13b7e4f884ae8ef639d79f1f7c89ca]
class django.contrib.auth.models.AbstractUser--><rect fill="#FEFECE" filter="url(#fs716de66m1vc)" height="48" id="django.contrib.auth.models.AbstractUser" style="stroke:#A80036;stroke-width:1.5;" width="106" x="104" y="131.1992"/><ellipse cx="119" cy="147.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M121.4731,153.3423 Q120.8921,153.6411 120.2529,153.7905 Q119.6138,153.9399 118.9082,153.9399 Q116.4014,153.9399 115.0815,152.2881 Q113.7617,150.6362 113.7617,147.5151 Q113.7617,144.3857 115.0815,142.7339 Q116.4014,141.082 118.9082,141.082 Q119.6138,141.082 120.2612,141.2314 Q120.9087,141.3809 121.4731,141.6797 L121.4731,144.4023 Q120.8423,143.8213 120.2488,143.5515 Q119.6553,143.2817 119.0244,143.2817 Q117.6797,143.2817 116.9949,144.3484 Q116.3101,145.415 116.3101,147.5151 Q116.3101,149.6069 116.9949,150.6736 Q117.6797,151.7402 119.0244,151.7402 Q119.6553,151.7402 120.2488,151.4705 Q120.8423,151.2007 121.4731,150.6196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="133" y="151.7344">AbstractUser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="105" x2="209" y1="163.1992" y2="163.1992"/><line style="stroke:#A80036;stroke-width:1.5;" x1="105" x2="209" y1="171.1992" y2="171.1992"/><!--MD5=[416aff34431ff04a88b33089e033b009]
class rest_framework_simplejwt.serializers.TokenObtainSerializer--><rect fill="#FEFECE" filter="url(#fs716de66m1vc)" height="48" id="rest_framework_simplejwt.serializers.TokenObtainSerializer" style="stroke:#A80036;stroke-width:1.5;" width="159" x="350.5" y="131.1992"/><ellipse cx="365.5" cy="147.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M367.9731,153.3423 Q367.3921,153.6411 366.7529,153.7905 Q366.1138,153.9399 365.4082,153.9399 Q362.9014,153.9399 361.5815,152.2881 Q360.2617,150.6362 360.2617,147.5151 Q360.2617,144.3857 361.5815,142.7339 Q362.9014,141.082 365.4082,141.082 Q366.1138,141.082 366.7612,141.2314 Q367.4087,141.3809 367.9731,141.6797 L367.9731,144.4023 Q367.3423,143.8213 366.7488,143.5515 Q366.1553,143.2817 365.5244,143.2817 Q364.1797,143.2817 363.4949,144.3484 Q362.8101,145.415 362.8101,147.5151 Q362.8101,149.6069 363.4949,150.6736 Q364.1797,151.7402 365.5244,151.7402 Q366.1553,151.7402 366.7488,151.4705 Q367.3423,151.2007 367.9731,150.6196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127" x="379.5" y="151.7344">TokenObtainSerializer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="351.5" x2="508.5" y1="163.1992" y2="163.1992"/><line style="stroke:#A80036;stroke-width:1.5;" x1="351.5" x2="508.5" y1="171.1992" y2="171.1992"/><!--MD5=[b781bd9125a3e95a039e5be115a95090]
class rest_framework_simplejwt.views.TokenObtainPairView--><rect fill="#FEFECE" filter="url(#fs716de66m1vc)" height="48" id="rest_framework_simplejwt.views.TokenObtainPairView" style="stroke:#A80036;stroke-width:1.5;" width="155" x="156.5" y="760.1992"/><ellipse cx="171.5" cy="776.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M173.9731,782.3423 Q173.3921,782.6411 172.7529,782.7905 Q172.1138,782.9399 171.4082,782.9399 Q168.9014,782.9399 167.5815,781.2881 Q166.2617,779.6362 166.2617,776.5151 Q166.2617,773.3857 167.5815,771.7339 Q168.9014,770.082 171.4082,770.082 Q172.1138,770.082 172.7612,770.2314 Q173.4087,770.3809 173.9731,770.6797 L173.9731,773.4023 Q173.3423,772.8213 172.7488,772.5515 Q172.1553,772.2817 171.5244,772.2817 Q170.1797,772.2817 169.4949,773.3484 Q168.8101,774.415 168.8101,776.5151 Q168.8101,778.6069 169.4949,779.6736 Q170.1797,780.7402 171.5244,780.7402 Q172.1553,780.7402 172.7488,780.4705 Q173.3423,780.2007 173.9731,779.6196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="185.5" y="780.7344">TokenObtainPairView</text><line style="stroke:#A80036;stroke-width:1.5;" x1="157.5" x2="310.5" y1="792.1992" y2="792.1992"/><line style="stroke:#A80036;stroke-width:1.5;" x1="157.5" x2="310.5" y1="800.1992" y2="800.1992"/><!--MD5=[070b62e242ac5d821553798a3dcf0822]
class AppDevice--><rect codeLine="44" fill="#FEFECE" filter="url(#fs716de66m1vc)" height="99.8203" id="AppDevice" style="stroke:#A80036;stroke-width:1.5;" width="263" x="600.5" y="105.1992"/><ellipse cx="696.75" cy="121.1992" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M699.2231,127.3423 Q698.6421,127.6411 698.0029,127.7905 Q697.3638,127.9399 696.6582,127.9399 Q694.1514,127.9399 692.8315,126.2881 Q691.5117,124.6362 691.5117,121.5151 Q691.5117,118.3857 692.8315,116.7339 Q694.1514,115.082 696.6582,115.082 Q697.3638,115.082 698.0112,115.2314 Q698.6587,115.3809 699.2231,115.6797 L699.2231,118.4023 Q698.5923,117.8213 697.9988,117.5515 Q697.4053,117.2817 696.7744,117.2817 Q695.4297,117.2817 694.7449,118.3484 Q694.0601,119.415 694.0601,121.5151 Q694.0601,123.6069 694.7449,124.6736 Q695.4297,125.7402 696.7744,125.7402 Q697.4053,125.7402 697.9988,125.4705 Q698.5923,125.2007 699.2231,124.6196 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="717.25" y="125.7344">AppDevice</text><line style="stroke:#A80036;stroke-width:1.5;" x1="601.5" x2="862.5" y1="137.1992" y2="137.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="251" x="606.5" y="151.834">Django model to keep the required information</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="165" x="606.5" y="164.7891">about user's authenticator app</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="601.5" x2="862.5" y1="171.1094" y2="171.1094"/><ellipse cx="611.5" cy="182.1094" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="620.5" y="185.7441">user: OneToOne[User]</text><ellipse cx="611.5" cy="195.0645" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="620.5" y="198.6992">secret_key: str</text><!--MD5=[3d0a28bcfaef4b094b78d0d96bb7d615]
reverse link django.contrib.auth.models.AbstractUser to User--><path codeLine="11" d="M158.54,199.6292 C160.37,250.9092 163.36,334.8492 164.94,379.3392 " fill="none" id="django.contrib.auth.models.AbstractUser-backto-User" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="151.55,199.7792,157.83,179.5492,165.54,199.2892,151.55,199.7792" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[85ba9692f17951ccd83e6464cc87d52b]
reverse link rest_framework_simplejwt.serializers.TokenObtainSerializer to AppDevicePairSerializer--><path codeLine="24" d="M430,199.7892 C430,240.3992 430,301.3892 430,347.0892 " fill="none" id="rest_framework_simplejwt.serializers.TokenObtainSerializer-backto-AppDevicePairSerializer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="423,199.5492,430,179.5492,437,199.5492,423,199.5492" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[56073e185a74031366d5385fc50a00db]
link AppDeviceTokenObtainPairView to rest_framework_simplejwt.views.TokenObtainPairView--><path codeLine="37" d="M234,661.3792 C234,686.6192 234,716.0392 234,739.6392 " fill="none" id="AppDeviceTokenObtainPairView-to-rest_framework_simplejwt.views.TokenObtainPairView" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="241,739.7692,234,759.7692,227,739.7692,241,739.7692" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[57228fd2e2a35dc80ea7e9ff9f040089]
link AppDevicePairSerializer to AppDeviceTokenObtainPairView--><path codeLine="38" d="M366.64,473.4292 C345.3,494.3892 321.45,517.8092 299.92,538.9592 " fill="none" id="AppDevicePairSerializer-to-AppDeviceTokenObtainPairView" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="290.53,548.1792,297.615,546.8365,299.1006,539.7801,292.0156,541.1228,290.53,548.1792" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d7bf1ec40bcedd3f0befc7e7527cdfbc]
link AppDevice to AppDevicePairSerializer--><path codeLine="51" d="M673.41,205.2792 C628.24,243.1192 565.14,295.9892 514.5,338.4092 " fill="none" id="AppDevice-to-AppDevicePairSerializer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="504.22,347.0192,511.3885,346.2369,513.4235,339.3189,506.255,340.1012,504.22,347.0192" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0de862cc8db0f9c1aec13aae6b900e51]
@startuml sign_in_objects

title "Sign In Objects"

top to bottom direction

package authentication {
    package models {
        class User {
            Custom User model
        }
        User -up-|> django.contrib.auth.models.AbstractUser
    }
    package serializers {
        class AppDevicePairSerializer{
            Custom serializer that validates the User using
            the provided OTP code
            ..
            +username_field: str
            +__init__(self, *args, **kwargs)
            +validate(self, attrs)
            +get_token(cls, user)
        }

        AppDevicePairSerializer -up-|> rest_framework_simplejwt.serializers.TokenObtainSerializer
    }
    package views {
        class AppDeviceTokenObtainPairView{
            Get JWT tokens for User with AppDevice
            and OTP code.
            ..

            +serializer_class = AppDevicePairSerializer
            +@action authenticate(self, *args, **kwargs)
        }
        note right of AppDeviceTokenObtainPairView: authenticate is an action \nto authenticate user with email / password pair \nbefore authentication with OTP

        AppDeviceTokenObtainPairView - -|> rest_framework_simplejwt.views.TokenObtainPairView
        AppDevicePairSerializer - -* AppDeviceTokenObtainPairView
    }
}

package user_devices {
    package models as device_models {
        class AppDevice {
            Django model to keep the required information
            about user's authenticator app
            ..
            +user: OneToOne[User]
            +secret_key: str
        }
        AppDevice - -o AppDevicePairSerializer
    }
    
}

@enduml

PlantUML version 1.2021.7(Sun May 23 15:40:07 EEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>