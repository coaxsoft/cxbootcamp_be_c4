<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="648px" preserveAspectRatio="none" style="width:958px;height:648px;background:#FFFFFF;" version="1.1" viewBox="0 0 958 648" width="958px" zoomAndPan="magnify"><defs><filter height="300%" id="fbqk4fbulpg1k" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="226" x="364.75" y="29.4023">Sign In Sequence Diagram</text><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="231.1738" style="stroke:#A80036;stroke-width:1.0;" width="10" x="343.5" y="314.5508"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="130.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="592.5" y="154.998"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="859.5" y="444.793"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="927" y="184.3086"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="210.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="927" y="343.8613"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="123.6875" y2="563.7246"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="348" x2="348" y1="123.6875" y2="563.7246"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="597" x2="597" y1="123.6875" y2="563.7246"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="864.5" x2="864.5" y1="123.6875" y2="563.7246"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="931.5" x2="931.5" y1="123.6875" y2="563.7246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="120.7344">User</text><ellipse cx="23.5" cy="50.1992" fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,58.1992 L23.5,85.1992 M10.5,66.1992 L36.5,66.1992 M23.5,85.1992 L10.5,100.1992 M23.5,85.1992 L36.5,100.1992 " fill="none" filter="url(#fbqk4fbulpg1k)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="576.2598">User</text><ellipse cx="23.5" cy="589.2129" fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,597.2129 L23.5,624.2129 M10.5,605.2129 L36.5,605.2129 M23.5,624.2129 L10.5,639.2129 M23.5,624.2129 L36.5,639.2129 " fill="none" filter="url(#fbqk4fbulpg1k)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="233" x="230" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="237" y="108.7344">AppDeviceTokenObtainPairView</text><rect fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="233" x="230" y="562.7246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="237" y="583.2598">AppDeviceTokenObtainPairView</text><rect fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="157" x="517" y="88.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="524" y="108.7344">@action authenticate</text><rect fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="157" x="517" y="562.7246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="524" y="583.2598">@action authenticate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="825.5" y="120.7344">AppDevice</text><ellipse cx="864.5" cy="91.1992" fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="852.5" x2="876.5" y1="105.1992" y2="105.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="825.5" y="576.2598">AppDevice</text><ellipse cx="864.5" cy="595.2129" fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="852.5" x2="876.5" y1="609.2129" y2="609.2129"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="913.5" y="120.7344">User</text><ellipse cx="932" cy="91.1992" fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="920" x2="944" y1="105.1992" y2="105.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="913.5" y="576.2598">User</text><ellipse cx="932" cy="595.2129" fill="#FEFECE" filter="url(#fbqk4fbulpg1k)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="920" x2="944" y1="609.2129" y2="609.2129"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="231.1738" style="stroke:#A80036;stroke-width:1.0;" width="10" x="343.5" y="314.5508"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="130.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="592.5" y="154.998"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="859.5" y="444.793"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="100.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="927" y="184.3086"/><rect fill="#FFFFFF" filter="url(#fbqk4fbulpg1k)" height="210.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="927" y="343.8613"/><polygon fill="#A80036" points="580.5,150.998,590.5,154.998,580.5,158.998,584.5,154.998" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="586.5" y1="154.998" y2="154.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="30.5" y="150.2559">{"email": email, "password": password}</text><polygon fill="#A80036" points="915,180.3086,925,184.3086,915,188.3086,919,184.3086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="602.5" x2="921" y1="184.3086" y2="184.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="609.5" y="179.5664">Look for User with email in DB</text><polygon fill="#A80036" points="613.5,209.6191,603.5,213.6191,613.5,217.6191,609.5,213.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="607.5" x2="926" y1="213.6191" y2="213.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="619.5" y="208.877">User Found</text><line style="stroke:#A80036;stroke-width:1.0;" x1="602.5" x2="644.5" y1="242.9297" y2="242.9297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="644.5" y1="242.9297" y2="255.9297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="603.5" x2="644.5" y1="255.9297" y2="255.9297"/><polygon fill="#A80036" points="613.5,251.9297,603.5,255.9297,613.5,259.9297,609.5,255.9297" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="609.5" y="238.1875">Authenticate User with the given creds</text><polygon fill="#A80036" points="34.5,281.2402,24.5,285.2402,34.5,289.2402,30.5,285.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28.5" x2="596.5" y1="285.2402" y2="285.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="40.5" y="280.498">200 Success</text><polygon fill="#A80036" points="331.5,310.5508,341.5,314.5508,331.5,318.5508,335.5,314.5508" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="337.5" y1="314.5508" y2="314.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="30.5" y="309.8086">{"email": email, "password": pass, "code": "OTP"}</text><polygon fill="#A80036" points="915,339.8613,925,343.8613,915,347.8613,919,343.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="353.5" x2="921" y1="343.8613" y2="343.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="360.5" y="339.1191">Look for User with email in DB</text><polygon fill="#A80036" points="364.5,369.1719,354.5,373.1719,364.5,377.1719,360.5,373.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="926" y1="373.1719" y2="373.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="370.5" y="368.4297">User Found</text><line style="stroke:#A80036;stroke-width:1.0;" x1="353.5" x2="395.5" y1="402.4824" y2="402.4824"/><line style="stroke:#A80036;stroke-width:1.0;" x1="395.5" x2="395.5" y1="402.4824" y2="415.4824"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="395.5" y1="415.4824" y2="415.4824"/><polygon fill="#A80036" points="364.5,411.4824,354.5,415.4824,364.5,419.4824,360.5,415.4824" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="360.5" y="397.7402">Authenticate User with email / pass</text><polygon fill="#A80036" points="847.5,440.793,857.5,444.793,847.5,448.793,851.5,444.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="353.5" x2="853.5" y1="444.793" y2="444.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="360.5" y="440.0508">Get User's AppDevice</text><polygon fill="#A80036" points="364.5,470.1035,354.5,474.1035,364.5,478.1035,360.5,474.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="858.5" y1="474.1035" y2="474.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="370.5" y="469.3613">AppDevice Found</text><line style="stroke:#A80036;stroke-width:1.0;" x1="353.5" x2="395.5" y1="503.4141" y2="503.4141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="395.5" x2="395.5" y1="503.4141" y2="516.4141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="395.5" y1="516.4141" y2="516.4141"/><polygon fill="#A80036" points="364.5,512.4141,354.5,516.4141,364.5,520.4141,360.5,516.4141" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="360.5" y="498.6719">Verify OTP code</text><polygon fill="#A80036" points="34.5,541.7246,24.5,545.7246,34.5,549.7246,30.5,545.7246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28.5" x2="347.5" y1="545.7246" y2="545.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="40.5" y="540.9824">200 {"access_token": "...", "refresh_token": "..."}</text><!--MD5=[17e905caa66eace41723b7e6a8386dd6]
@startuml sign_in_sequence

title "Sign In Sequence Diagram"

actor User

participant AppDeviceTokenObtainPairView
participant "@action authenticate" as authenticate

entity AppDevice
entity User as UserModel

User -> authenticate: {"email": email, "password": password}
activate authenticate

authenticate -> UserModel: Look for User with email in DB
activate UserModel

UserModel -> authenticate: User Found

authenticate -> authenticate: Authenticate User with the given creds

authenticate -> User: 200 Success

deactivate UserModel
deactivate authenticate

User -> AppDeviceTokenObtainPairView: {"email": email, "password": pass, "code": "OTP"}
activate AppDeviceTokenObtainPairView

AppDeviceTokenObtainPairView -> UserModel: Look for User with email in DB
activate UserModel

UserModel -> AppDeviceTokenObtainPairView: User Found
AppDeviceTokenObtainPairView -> AppDeviceTokenObtainPairView: Authenticate User with email / pass

AppDeviceTokenObtainPairView -> AppDevice: Get User's AppDevice
activate AppDevice

AppDevice -> AppDeviceTokenObtainPairView: AppDevice Found

AppDeviceTokenObtainPairView -> AppDeviceTokenObtainPairView: Verify OTP code

AppDeviceTokenObtainPairView -> User: 200 {"access_token": "...", "refresh_token": "..."}

deactivate AppDevice

deactivate AppDeviceTokenObtainPairView

@enduml

PlantUML version 1.2021.7(Sun May 23 15:40:07 EEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>